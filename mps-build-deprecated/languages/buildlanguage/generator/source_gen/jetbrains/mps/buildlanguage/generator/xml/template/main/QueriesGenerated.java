package jetbrains.mps.buildlanguage.generator.xml.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.Generated;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.generator.template.PropertyMacroContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.smodel.behaviour.BehaviorReflection;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.buildlanguage.behavior.Project_Behavior;
import jetbrains.mps.build.property.behavior.PropertyNode_Behavior;
import jetbrains.mps.generator.template.IfMacroContext;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.buildlanguage.behavior.TargetDeclaration_Behavior;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import java.util.List;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.ISelector;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import java.util.Comparator;
import jetbrains.mps.generator.template.TemplateQueryContext;

@Generated
public class QueriesGenerated {
  public final boolean NEEDS_OPCONTEXT = false;
  public static boolean baseMappingRule_Condition_1224769157301(final BaseMappingRuleContext _context) {
    return (SNodeOperations.getNodeAncestor(_context.getNode(), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, "jetbrains.mps.buildlanguage.structure.Project"), false, true) != null);
  }
  public static boolean baseMappingRule_Condition_1224769231960(final BaseMappingRuleContext _context) {
    return (SNodeOperations.getNodeAncestor(_context.getNode(), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, "jetbrains.mps.buildlanguage.structure.Project"), false, true) != null);
  }
  public static Object propertyMacro_GetPropertyValue_1197041984406(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }
  public static Object propertyMacro_GetPropertyValue_1229186338304(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x11e3110cbcfL, "if"));
  }
  public static Object propertyMacro_GetPropertyValue_1229186668950(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x11e313795e1L, "unless"));
  }
  public static Object propertyMacro_GetPropertyValue_1197041696784(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }
  public static Object propertyMacro_GetPropertyValue_1197047737338(final PropertyMacroContext _context) {
    return BehaviorReflection.invokeVirtual(String.class, SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e2960dL, 0x116a9eec15bL, "propertyValue")), "virtual_toString_1213877472569", new Object[]{});
  }
  public static Object propertyMacro_GetPropertyValue_1197043097344(final PropertyMacroContext _context) {
    return ((String) _context.getVariable("var:projectName"));
  }
  public static Object propertyMacro_GetPropertyValue_1197043134402(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x116aa69d187L, "default")), MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9fe43f8L, 0x116a9febfe9L, "targetDeclaration")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }
  public static Object propertyMacro_GetPropertyValue_1200145395655(final PropertyMacroContext _context) {
    return BehaviorReflection.invokeVirtual(String.class, SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1172c1e9cbaL, "basedir")), "virtual_toString_1213877472569", new Object[]{});
  }
  public static Object propertyMacro_GetPropertyValue_1230222683911(final PropertyMacroContext _context) {
    return "${ant.file." + ((String) _context.getVariable("var:projectName")) + "}/../" + BehaviorReflection.invokeVirtual(String.class, _context.getNode(), "virtual_getProjectFileName_1230222765831", new Object[]{});
  }
  public static Object propertyMacro_GetPropertyValue_1199647316381(final PropertyMacroContext _context) {
    return Project_Behavior.call_getDocumentName_1213877351812(_context.getNode());
  }
  public static Object propertyMacro_GetPropertyValue_1197725505264(final PropertyMacroContext _context) {
    return BehaviorReflection.invokeVirtual(String.class, _context.getNode(), "virtual_toString_1213877472569", new Object[]{});
  }
  public static Object propertyMacro_GetPropertyValue_1201017147787(final PropertyMacroContext _context) {
    return "${ant.file." + SPropertyOperations.getString(SNodeOperations.cast(SNodeOperations.getContainingRoot(_context.getNode()), MetaAdapterFactory.getInterfaceConcept(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, "jetbrains.mps.lang.core.structure.INamedConcept")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")) + "}/../" + PropertyNode_Behavior.call_getFileName_1213877341757(SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x1177e898417L, 0x1177ea0f9f3L, "propertyNode")));
  }
  public static Object propertyMacro_GetPropertyValue_1201709830416(final PropertyMacroContext _context) {
    if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(_context.getNode()), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, "jetbrains.mps.buildlanguage.structure.Project"))) {
      return "${ant.file." + SPropertyOperations.getString(SNodeOperations.cast(SNodeOperations.getParent(_context.getNode()), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, "jetbrains.mps.buildlanguage.structure.Project")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")) + "}/../" + Project_Behavior.call_getFileName_1213877351819(SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x117cb0f1350L, 0x117cb0f43e9L, "project")));
    }
    return "${ant.file." + SPropertyOperations.getString(SNodeOperations.cast(SNodeOperations.getContainingRoot(_context.getNode()), MetaAdapterFactory.getInterfaceConcept(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, "jetbrains.mps.lang.core.structure.INamedConcept")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")) + "}/../" + Project_Behavior.call_getFileName_1213877351819(SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x117cb0f1350L, 0x117cb0f43e9L, "project")));
  }
  public static Object propertyMacro_GetPropertyValue_1219150196232(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }
  public static Object propertyMacro_GetPropertyValue_1219153881551(final PropertyMacroContext _context) {
    return "Property " + SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")) + " unspecified.";
  }
  public static Object propertyMacro_GetPropertyValue_1240399737243(final PropertyMacroContext _context) {
    return BehaviorReflection.invokeVirtual(String.class, SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x120cd863ec7L, 0x120cd86b437L, "propertyFile")), "virtual_toString_1213877472569", new Object[]{});
  }
  public static boolean ifMacro_Condition_1229186350652(final IfMacroContext _context) {
    return isNotEmptyString(SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x11e3110cbcfL, "if")));
  }
  public static boolean ifMacro_Condition_1229186682042(final IfMacroContext _context) {
    return isNotEmptyString(SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x11e313795e1L, "unless")));
  }
  public static boolean ifMacro_Condition_1240316820310(final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x116aa69d187L, "default")) != null);
  }
  public static boolean ifMacro_Condition_1200145404081(final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1172c1e9cbaL, "basedir")) != null);
  }
  public static boolean ifMacro_Condition_1219774096052(final IfMacroContext _context) {
    return SPropertyOperations.getBoolean(SNodeOperations.cast(_context.getNode(), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, "jetbrains.mps.buildlanguage.structure.ExternalPropertyDeclaration")), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, 0x11c003513c6L, "checkOnStart"));
  }
  public static SNode sourceNodeQuery_1197045463934(final SourceSubstituteMacroNodeContext _context) {
    if (ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x116aa0b5132L, "depends"))).count() == 0) {
      return null;
    }
    SNode attribute = SConceptOperations.createNewNode(SNodeOperations.asInstanceConcept(MetaAdapterFactory.getConcept(0x823d79c62e264b0eL, 0x92a0e1884a10bba9L, 0x101f200f062L, "jetbrains.mps.xml.deprecated.structure.Attribute")));
    SPropertyOperations.set(attribute, MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"), "depends");
    SPropertyOperations.set(attribute, MetaAdapterFactory.getProperty(0x823d79c62e264b0eL, 0x92a0e1884a10bba9L, 0x101f200f062L, 0x101f20120aeL, "value"), TargetDeclaration_Behavior.call_getDependanceString_1213877231974(_context.getNode()));
    return attribute;
  }
  public static SNode sourceNodeQuery_1219774104894(final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }
  public static SNode sourceNodeQuery_3749843785778050921(final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x340a1f0e3e804789L, 0x340a1f0e3e80478aL, "xml"));
  }
  public static Iterable<SNode> sourceNodesQuery_1197045140155(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x1177ef0b8eaL, "propertyList"));
  }
  public static Iterable<SNode> sourceNodesQuery_1219152731276(final SourceSubstituteMacroNodesContext _context) {
    List<SNode> references = SNodeOperations.getNodeDescendants(_context.getNode(), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116aa099456L, "jetbrains.mps.buildlanguage.structure.PropertyReference"), false, new SAbstractConcept[]{});
    Iterable<SNode> externalReferences = ListSequence.fromList(references).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        SNode propertyDeclaration = SLinkOperations.getTarget(it, MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116aa099456L, 0x116aa09b5e8L, "propertyDeclaration"));
        return SNodeOperations.isInstanceOf(propertyDeclaration, MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, "jetbrains.mps.buildlanguage.structure.ExternalPropertyDeclaration")) && !(ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x1177ef0b8eaL, "propertyList"))).contains(propertyDeclaration)) && !(SPropertyOperations.getBoolean(SNodeOperations.cast(propertyDeclaration, MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, "jetbrains.mps.buildlanguage.structure.ExternalPropertyDeclaration")), MetaAdapterFactory.getProperty(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, 0x11c003513c6L, "checkOnStart")));
      }
    });
    Iterable<SNode> decls = Sequence.fromIterable(externalReferences).select(new ISelector<SNode, SNode>() {
      public SNode select(SNode it) {
        return SLinkOperations.getTarget(it, MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116aa099456L, 0x116aa09b5e8L, "propertyDeclaration"));
      }
    });
    return Sequence.fromIterable(decls).distinct();
  }
  public static Iterable<SNode> sourceNodesQuery_1197045203873(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e27798L, 0x116a9e938e9L, "taskCall"));
  }
  public static Iterable<SNode> sourceNodesQuery_1220365505588(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1177eeaf762L, "importProperties"));
  }
  public static Iterable<SNode> sourceNodesQuery_1219774083522(final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1177ef20ec9L, "property"))).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, "jetbrains.mps.buildlanguage.structure.ExternalPropertyDeclaration"));
      }
    });
  }
  public static Iterable<SNode> sourceNodesQuery_1221832362895(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x117cb127d95L, "importProject"));
  }
  public static Iterable<SNode> sourceNodesQuery_1230222691427(final SourceSubstituteMacroNodesContext _context) {
    final Set<String> existing = SetSequence.fromSet(new HashSet<String>());
    for (SNode importProject : ListSequence.fromList(SNodeOperations.getNodeDescendants(_context.getNode(), MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x117cb0f1350L, "jetbrains.mps.buildlanguage.structure.ImportProject"), false, new SAbstractConcept[]{}))) {
      SetSequence.fromSet(existing).addElement(SPropertyOperations.getString(SLinkOperations.getTarget(importProject, MetaAdapterFactory.getReferenceLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x117cb0f1350L, 0x117cb0f43e9L, "project")), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name")));
    }
    Iterable<SNode> projects = ListSequence.fromList(SNodeOperations.getNodeDescendants(_context.getNode(), MetaAdapterFactory.getInterfaceConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11e6ee02d77L, "jetbrains.mps.buildlanguage.structure.ITargetReference"), false, new SAbstractConcept[]{})).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        boolean b = !(SetSequence.fromSet(existing).contains(BehaviorReflection.invokeVirtual(String.class, it, "virtual_getProjectFileName_1230222765831", new Object[]{})));
        SetSequence.fromSet(existing).addElement(BehaviorReflection.invokeVirtual(String.class, it, "virtual_getProjectFileName_1230222765831", new Object[]{}));
        return b;
      }
    });
    return Sequence.fromIterable(projects).sort(new Comparator<SNode>() {
      public int compare(SNode a, SNode b) {
        return BehaviorReflection.invokeVirtual(String.class, a, "virtual_getProjectFileName_1230222765831", new Object[]{}).compareToIgnoreCase(BehaviorReflection.invokeVirtual(String.class, b, "virtual_getProjectFileName_1230222765831", new Object[]{}));
      }
    }, true);
  }
  public static Iterable<SNode> sourceNodesQuery_1197043380401(final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1177ef20ec9L, "property"))).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return !(SNodeOperations.isInstanceOf(it, MetaAdapterFactory.getConcept(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x11bdadd1f72L, "jetbrains.mps.buildlanguage.structure.ExternalPropertyDeclaration")));
      }
    });
  }
  public static Iterable<SNode> sourceNodesQuery_1199029853220(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x1172677377eL, "paths"));
  }
  public static Iterable<SNode> sourceNodesQuery_1197043378055(final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getChildren(_context.getNode(), MetaAdapterFactory.getContainmentLink(0xb608d441308418dL, 0x871522d040c3b3ccL, 0x116a9e1f76dL, 0x116a9e2293aL, "target"));
  }
  public static Object insertMacro_varValue_5198087850870257905(final TemplateQueryContext _context) {
    return SPropertyOperations.getString(_context.getNode(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }
  private static boolean isNotEmptyString(String str) {
    return str != null && str.length() > 0;
  }
}
